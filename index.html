<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>진짜 company</title>

  <style>
    /* 1. 기본 스타일 및 배경 */
    body {
  margin: 0;
  padding: 0;
  min-height: 100vh;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", sans-serif;
  
  /* 배경 이미지 2개 설정 */
  background-image: 
    url("images/top_person.png"), /* 윗 레이어: 사람 (배경 투명 PNG) */
    url("images/pixel_bg.png");   /* 아랫 레이어: 움직일 픽셀 배경 */

  /* 사람 크기 조절: 400px(가로) auto(세로비율맞춤), 아래 배경은 원래 크기 */
  background-size: 1000px auto, 800px; 
  background-position: center bottom, 0 0;
  background-repeat: no-repeat, repeat;
  
  /* 애니메이션: movePixel이라는 이름으로 20초 동안 무한 반복 */
  animation: movePixel 20s linear infinite;

  display: flex;
  justify-content: center;
  align-items: flex-start;
  overflow: hidden;
  cursor: pointer;
}

/* 픽셀 배경만 움직이게 하는 핵심 코드 */
@keyframes movePixel {
  0% {
    background-position: center bottom, 0 0;
  }
  100% {
    /* 사람 위치는 그대로 bottom 유지, 픽셀 배경만 가로로 이동 */
    background-position: center bottom, 1000px 0;
  }
}


    /* 2. 첫 화면 웰컴 텍스트 애니메이션 */
    .welcome-text {
      margin-top: 100px;
      font-size: 3rem;
      font-weight: bold;
      color: #000;
      text-shadow: 2px 2px 10px rgba(255, 255, 255, 0.5);
      z-index: 1; /* 오버레이보다 아래에 위치 */
      
      opacity: 0;
      transform: translateY(30px);
      animation: fadeInUp 1.5s ease-out forwards;
    }

    @keyframes fadeInUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* 3. 오버레이 (클릭 시 나타남) */
    .overlay {
      position: fixed;
      inset: 0;
      background: rgba(255, 255, 255, 0.6);
      backdrop-filter: blur(2px);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease;
      z-index: 10;
    }

    /* 4. 패널 (입력창) */
    .panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -48%);
      max-width: 600px;
      width: 90%;
      padding: 48px 56px;
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 40px rgba(0,0,0,0.15);
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.4s ease, transform 0.4s ease;
      cursor: default;
      z-index: 20;
    }

    /* 활성화 상태 (클릭 후) */
    body.active .overlay {
      opacity: 1;
      pointer-events: auto;
    }

    body.active .panel {
      opacity: 1;
      pointer-events: auto;
      transform: translate(-50%, -50%);
    }

    /* 패널 내부 스타일 */
    .panel h1 {
      margin: 0 0 16px 0;
      font-size: 24px;
      text-align: left;
    }

    .panel p {
      margin: 0 0 28px 0;
      color: #444;
    }

    .formRow {
      display: flex;
      gap: 12px;
      align-items: center;
    }

    input {
      flex: 1;
      padding: 14px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #ccc;
    }

    button {
      padding: 14px 20px;
      font-size: 16px;
      border-radius: 8px;
      border: 1px solid #aaa;
      background: #f5f5f5;
      cursor: pointer;
    }

    #status {
      margin-top: 16px;
      font-size: 14px;
      color: #666;
    }
  </style>
</head>

<body>

  <h1 class="welcome-text">진짜 company에 오신 것을 환영합니다.</h1>

  <div class="overlay"></div>

  <div class="panel">
    <h1>진짜 company에 오신 것을 환영합니다</h1>
    <p>‘진짜’로 만들고 싶은 사실을 입력하세요.</p>

    <div class="formRow">
      <input id="factInput" type="text" placeholder="여기에 입력하세요" />
      <button id="submitBtn">전송</button>
    </div>
    <p id="status"></p>
  </div>

  <script>
    const input = document.getElementById("factInput");
    const button = document.getElementById("submitBtn");
    const statusText = document.getElementById("status");
    const panel = document.querySelector(".panel");
    const overlay = document.querySelector(".overlay");

    // 배경 클릭 시 UI 토글
    document.addEventListener("click", (e) => {
      // 이미 패널이 떠 있는 상태에서 패널 안을 클릭한 건 무시
      if (panel.contains(e.target)) return;
      
      document.body.classList.toggle("active");
    });

    // 전송 로직
    const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbwu3kZEfdIlqtOajT9bTmoZG9Ib02NSV9J8YRlZSHe19c92TM35Uhqu8PqBLxu1gITuzw/exec";
    const TOKEN = "my_secret_8982";

    button.addEventListener("click", async (e) => {
      e.stopPropagation(); // 배경 클릭 이벤트로 번지는 것 방지
      const value = input.value.trim();

      if (!value) {
        statusText.textContent = "내용을 입력해주세요.";
        return;
      }

      statusText.textContent = "처리중입니다...";

      try {
        const body = new URLSearchParams({ fact: value, token: TOKEN });
        const res = await fetch(WEB_APP_URL, { method: "POST", body });
        const data = await res.json();

        if (!data.ok) {
          statusText.textContent = `오류: ${data.error}`;
          return;
        }

       statusText.textContent = "처리되었습니다! 잠시 후 이전 화면으로 돌아갑니다.";
        input.value = "";

        // 2초 뒤에 실행 (메시지를 읽을 시간을 줍니다)
        setTimeout(() => {
          
          // 방법 A: 이전 페이지(1번 웹사이트)로 돌아가기
          window.history.back(); 

          // 방법 B: 만약 새 창으로 띄운 거라면 창 닫기 (방법 A가 작동 안 할 때 대비)
          // window.close();

        }, 2000); 

      } catch (e) {
        statusText.textContent = "네트워크 오류가 발생했습니다.";
      }
    });

    
  </script>

</body>
</html>
